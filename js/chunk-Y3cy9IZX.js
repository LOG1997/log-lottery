import{g as e,b as l,c as a}from"./chunk-DsM932Ci.js";import{d as s,o as t,c as u,a as n,n as i,g as o,Q as c,ba as r,p as d,bb as f,h as p,bc as m,i as v,j as b}from"./chunk-Bpe8Il_K.js";const y={class:"w-full h-full flex flex-col items-center mt-6"},h=["disabled","accept"],w=["src"],x={key:2,class:"w-full h-full flex justify-center items-center flex-col gap-4"},g={key:0,class:"w-full flex items-center justify-between mt-2"},k={class:"max-w-[3/4] truncate text-sm"},j=s({__name:"index",props:{limitType:{},mode:{}},emits:["uploadFile"],setup(s,{emit:j}){const F=s,N=j,_=b(null),C=b(null);async function T(e){const s=e.target.files[0],t=s.type;if("json"===F.mode){const e=await l(s),a=JSON.parse(e);return C.value={data:a,fileName:s.name,type:t},_.value=s.name,void N("uploadFile",C.value)}const{data:u,fileName:n}=await a(s);C.value={data:u,fileName:n,type:t},_.value=n,N("uploadFile",C.value)}function q(){C.value=null,N("uploadFile",null)}return(l,a)=>(t(),u("div",y,[n("input",{id:"file-upload",disabled:null!==C.value,type:"file",class:"w-full bg-red-400/50 max-h-52 cursor-pointer absolute",style:{display:"none"},accept:s.limitType,onChange:T},null,40,h),n("label",{for:"file-upload",class:i([C.value?"cursor-not-allowed":null,"w-full h-52 cursor-pointer border-2 border-dashed flex items-center justify-center overflow-hidden"])},[C.value&&C.value.type.includes("image")?(t(),u("img",{key:0,class:"w-full object-cover stroke-0",src:o(e)(C.value.data),alt:""},null,8,w)):C.value&&C.value.type.includes("audio")?(t(),c(o(r),{key:1,class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"})):(t(),u("div",x,[d(o(f),{class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"}),a[0]||(a[0]=n("span",{class:"btn btn-neutral"},"点击上传",-1))]))],2),C.value?(t(),u("div",g,[n("p",k,p(_.value),1),n("button",{class:"btn btn-xs btn-square btn-ghost",onClick:q},[d(o(m))])])):v("",!0)]))}});export{j as _};
