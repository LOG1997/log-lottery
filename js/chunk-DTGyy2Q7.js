import{u as t}from"./chunk-B9lHjrML.js";import{a as e}from"./chunk-Czrwg_dh.js";import{d as a,u as n,r as s,l,s as i,h as o,a as c,b as r,t as u,j as b,F as p,B as m,o as d}from"./chunk-BraE6NOK.js";const f={class:"flex gap-3"},g={for:"explore"},v=["accept"],y={class:"btn btn-primary btn-sm"},k={class:"p-0"},h={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},C={class:"flex gap-3"},x=["onClick"],w=["onClick"],M=a({__name:"MusicConfig",setup(a){const{t:M}=n(),j=s(0),S=l.createInstance({name:"audioStore"}),D=t().globalConfig,{getMusicList:I}=i(D),L=s("audio/*"),T=s(I);function $(){D.resetMusicList(),S.clear()}function _(){D.clearMusicList(),S.clear()}async function B(){(await S.keys()).length>0&&S.iterate(((t,e)=>{D.addMusic({id:e+(new Date).getTime().toString(),name:e,url:"Storage"})}))}async function F(t){if(!/audio*/.test(t.target.files[0].type))return void(j.value=3);const{dataUrl:a,fileName:n}=await e(t.target.files[0]);S.setItem(`${(new Date).getTime().toString()}+${n}`,a).then((()=>{j.value=1,B()})).catch((()=>{j.value=2}))}return o((()=>{B()})),(t,e)=>(d(),c("div",null,[r("div",f,[r("button",{class:"btn btn-primary btn-sm",onClick:$},u(b(M)("button.reset")),1),r("label",g,[r("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:L.value,onChange:F},null,40,v),r("span",y,u(b(M)("button.upload")),1)]),r("button",{class:"btn btn-error btn-sm",onClick:_},u(b(M)("button.allDelete")),1)]),r("div",null,[r("ul",k,[(d(!0),c(p,null,m(T.value,(t=>(d(),c("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[r("div",h,[r("span",null,u(t.name),1)]),r("div",C,[r("button",{class:"btn btn-primary btn-xs",onClick:e=>async function(t){D.setCurrentMusic(t,!1)}(t)},u(b(M)("button.play")),9,x),r("button",{class:"btn btn-error btn-xs",onClick:e=>function(t){D.removeMusic(t.id),S.removeItem(t.name)}(t)},u(b(M)("button.delete")),9,w)])])))),128))])])]))}});export{M as default};
